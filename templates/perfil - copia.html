<!DOCTYPE html>
<html lang="en">
<title>Bienvenido</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="icon" type="image/png" href="static/img/icons/favicon.ico"/>

<link rel="stylesheet" href="https://v4-alpha.getbootstrap.com/dist/css/bootstrap.min.css">
<link href="https://v4-alpha.getbootstrap.com/examples/narrow-jumbotron/narrow-jumbotron.css" rel="stylesheet">


<link rel="stylesheet" type="text/css" href="static/css/util.css">
<link rel="stylesheet" type="text/css" href="static/css/login.css">

<style>
html {
    height: 100%;
}
* { padding: 0; margin: 0; }
html, body {
    min-height: 100% !important;
    height: 100%;
}


.mySlides {display: none}

.btn-circle.btn-xl { 
            width: 180px; 
            height: 180px; 
            padding: 10px 16px; 
            border-radius: 90px; 
            font-size: 12px; 
            text-align: center; 
            opacity: .8;
            font-size: 20px;
        }
        
    .back{
     
      background-color: rgba(255, 255, 255, 0.753);
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
      height: 100%;
      margin: 0;
      padding: 0;
    }

  .gradient {
  background: #9152f8;
  background: -webkit-linear-gradient(top, #7579ff, #b224ef);
  background: -o-linear-gradient(top, #7579ff, #b224ef);
  background: -moz-linear-gradient(top, #7579ff, #b224ef);
  background: linear-gradient(top, #7579ff, #b224ef);
}

.bubble {
 
  background: #00bfb6;
  padding: 1.5em;
  text-align: center;
  font-weight: 900;
  color: #fff;
  font-family: arial;
  position: relative;
}

.bubble:after { 
  content: "";
  width: 0px;
  height: 0px;
  position: absolute;
  border-left: 10px solid #00bfb6;
  border-right: 10px solid transparent;
  border-top: 10px solid #00bfb6;
  border-bottom: 10px solid transparent;
  left: 39px;
  bottom: -19px;
}

.circle {
  width: 70px;
  height: 70px;
  position: relative;
  left: 15px;
  margin-top: 5%;
}




</style>
<body style=" padding: 0; margin: 0;">


  {% if onboarding == 0 %}
  <div id="OnBoard"  style="background-color: rgba(128, 128, 128, 0.726); width: 100%; height: 100%; overflow: auto; position:absolute;z-index:1000;">
    <div  style="margin: auto; height: 60%;width: 60%; margin-top: 20%;">
      <div class="bubble">
        <div id="textBot">
          ¡Hola!. 
          <br>Soy BitBot, tu bot asistente, estoy aquí para ayudarte en tu primer día
          <br>¡Vamos a comenzar!.
        </div>
        <button id="skip" style="color: white;"><i class="fa fa-power-off" style="text-align: left;color: white;" aria-hidden="true"></i>No gracias  </button>
        <button id="btnAgrRes" style="color: white; margin-left: 3%;"><i class="fa fa-arrow-right" style="text-align: left;color: white;" aria-hidden="true"></i>Vamos!</button>
      </div>
      <img src="static/img/botHelp.png" class="circle">
    </div>
  </div>
  {% endif %}
  
  {% if onboarding == 1 %}
  <div style="background-color: rgba(128, 128, 128, 0.726); width: 100%; height: 100%; overflow: auto; position:absolute;z-index:1000;">
    <div  style="margin: auto; height: 40%;width: 46%; margin-top: 27%;">
      <div class="bubble" id="bubble">
        <div id="textBot">
          Genial
          <br>Ya subiste tu primer recibo.
          <br>¡Vamos a verlo!.
        </div>
        <button id="btnHist"><i class="fa fa-arrow-right" style="text-align: left;color: white;" aria-hidden="true"></i></button>
      </div>
      <img src="static/img/botHelp.png" id="bipbop" class="circle">
    </div>
  </div>
  {% endif %}

  {% if onboarding == 2 %}
  <div style="background-color: rgba(128, 128, 128, 0.726); width: 100%; height: 100%; overflow: auto; position:absolute;z-index:1000;">
    <div  style="margin: auto; height: 40%;width: 46%; margin-top: 27%;">
      <div class="bubble" id="bubble">
        <div id="textBot">
          Ya viste tu historial
          <br>Ahora solo queda un paso más.
          <br>¡Inspeccionar un producto!.
        </div>
        <button id="btnProd"><i class="fa fa-arrow-right" style="text-align: left;color: white;" aria-hidden="true"></i></button>
      </div>
      <img src="static/img/botHelp.png" id="bipbop" class="circle">
    </div>
  </div>
  {% endif %}

  {% if onboarding == 3 %}
  <div id="OnBoard" style="background-color: rgba(128, 128, 128, 0.726); width: 100%; height: 100%; overflow: auto; position:absolute;z-index:1000;">
    <div  style="margin: auto; height: 40%;width: 46%; margin-top: 27%;">
      <div class="bubble" id="bubble">
        <div id="textBot">
          ¡Excelente!
          <br>Completaste tu tutorial.
          <br>Pero no te preocupes, si me necesitas para otra cosa, aquí estare.
        </div>
        <button id="gracias" style="color: white;">¡Gracias BitBot!<i class="fa fa-thumbs-o-up" style="text-align: left;color: white;" aria-hidden="true"></i></button>
      </div>
      <img src="static/img/botHelp.png" id="bipbop" class="circle">
    </div>
  </div>
  {% endif %}



<!-- Navbar -->
<div class="w3-top" id="Nav">
  <div class="w3-bar w3-black w3-card">
    <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-left" href="javascript:void(0)" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    
    <a href="/historial" id="hist" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Historial</a>
    <a href="/conversion" id="conv" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Conversion</a> 
    <div class="w3-dropdown-hover w3-hide-small">
      <button class="w3-padding-large w3-button" id="catG" title="More">Productos<i class="fa fa-caret-down"></i></button>     
      <div class="w3-dropdown-content w3-bar-block w3-card-4">
        <a href="/catalogo" id="cat" class="w3-bar-item w3-button">Catalogo</a>
        <a href="/tester" id="test" class="w3-bar-item w3-button">Inspeccionar producto</a>
      </div>
    </div>
    <a href="/close" id="close" class="w3-bar-item w3-button w3-padding-large w3-hide-small">Cerrar Sesion</a>
    <div class="col" style="margin-left: 70%;">
      <img src="static/img/imgPerfil/{{g.foto}}" class="w3-bar-item" style="height: 60px; width: 80px;" alt="" loading="lazy">
      </div>
      <div class="col">
      <h5 class="card-title w3-bar-item w3-padding-large w3-hide-small">Bienvenid@ - {{g.user}}</h5>
      </div>
  </div>
</div>

<!-- Navbar on small screens (remove the onclick attribute if you want the navbar to always show on top of the content when clicking on the links) -->
<div id="navDemo" class="w3-bar-block w3-black w3-hide w3-hide-large w3-hide-medium w3-top" style="margin-top:46px">
  <a href="/historial" id="histC" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Historial</a>
  <a href="/conversion" id="convC" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Conversion</a>
  <a href="/catalogo" id="catC" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Catalogo</a>
  <a href="/tester" id="testC" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Inspeccionar producto</a>
  <a href="/close" id="closeC" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Cerrar sesion</a>
</div>

<!-- Page content -->
<div>

 
  {% if errorLog %}
	<div id="id01" class="w3-modal">
    <div class="w3-modal-content w3-animate-zoom w3-card-4">
      <header class="w3-container w3-pale-yellow"> 
        <span onclick="document.getElementById('id01').style.display='none'" 
        class="w3-button w3-display-topright">&times;</span>
        <h4>Error</h4>
      </header>
      <div class="w3-container">
        <p>{{ errorLog }}</p>
      </div>
    </div>
  </div>
</div>
  {% endif %}
  
 

  <!-- The Band Section -->
  <div class="w3-container w3-content w3-center w3-padding-64" style="max-width:800px" id="band">
    <h2 class="w3-wide" style="padding-bottom: 5%;">GANA PUNTOS Y AHORRA DINERO</h2>
    <div class="jumbotron gradient" style="width: 87%; margin: auto;">
      <div class="row align-items-center">
        <div class="col" style="margin-bottom:3%">
              <button id="puntos" class="btn btn-primary btn-circle btn-xl" href="/historial"><h1>{{puntos}}</h1><p style="font-size: 12px;color: white;">Puntos acumulados</p></button>
        </div>
        <div class="col" style="margin-bottom:3%">
              <button id="puntosF" class="btn btn-primary btn-circle btn-xl" ><h1>{{puntosF}}</h1><p style="font-size: 12px;color: white;">Puntos en espera</p></button>
        </div>
        <div class="col" style="margin-bottom:3%">
          <button id="nivel" class="btn btn-primary btn-circle btn-xl" ><h1>{{nivel}}</h1><p style="font-size: 12px;color: white;">Nivel</p></button>
    </div>
      </div>
  
      <p class="etiquetanum centrar-texto" style="color: white; font-size: 14px; margin: 5%;">Proxima fecha de expiración {{expiracion}} </p>
      <a class="login100-form-btn" id="subirRes" style="background-color: #4444dd" href="/recibos" role="button">Añadir Compra</a>
      <a class="login100-form-btn" style="margin-top:4%" id="inspP" style="background-color: #4444dd" href="/tester" role="button">Inspeccionar Producto</a>

    </div>

  </div>

  
<!-- End Page Content -->
</div>


<script>
// Automatic Slideshow - change image every 4 seconds

// Used to toggle the menu on small screens when clicking on the menu button
function myFunction() {
  var x = document.getElementById("navDemo");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}

// When the user clicks anywhere outside of the modal, close it
var modal = document.getElementById('ticketModal');
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

</script>



<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script src="static/js/login.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script>
   $('#btnAgrRes').click(function () {
    document.getElementById('subirRes').style.zIndex=1000;
    document.getElementById('textBot').innerHTML="Lo primero es agregar puntos.<br>Da click en el boton de 'Añadir Compra' para subir tu primer recibo"
    document.getElementById('btnAgrRes').style.display='none';

  });

  $('#puntos').click(function () {
    window.location.href = "/historial";
  });
  $('#puntosF').click(function () {
    window.location.href = "/historial";
  });
  $('#nivel').click(function () {
    window.location.href = "/rewards";
  });
  $('#gracias').click(function () {
    document.getElementById('OnBoard').style.display="none";
    $.ajax({
      type: 'POST',
      url: '/OnBoard',
      headers:{
        'Content-Type':'application/json'
      },
      data: JSON.stringify({"estado":"4"}),
      dataType:"json",
      success: function(res) {
        console.log('cambio!');                      
      },
      error: function() {
       console.log("No se cambio el usuario");
      }
    });
  });


  $('#skip').click(function () {
    document.getElementById('OnBoard').style.display="none";
    $.ajax({
      type: 'POST',
      url: '/OnBoard',
      headers:{
        'Content-Type':'application/json'
      },
      data: JSON.stringify({"estado":"4"}),
      dataType:"json",
      success: function(res) {
        console.log('cambio!');                      
      },
      error: function() {
       console.log("No se cambio el usuario");
      }
    });
  })


  $('#btnHist').click(function () {
    document.getElementById('Nav').style.zIndex=2000;
    document.getElementById('navDemo').style.zIndex=2000;
    document.getElementById('textBot').innerHTML="Da click en tu historial, el cual se encuentra en el menu";
    document.getElementById('catG').style.visibility="hidden";
    document.getElementById('conv').style.visibility="hidden";
    document.getElementById('cat').style.visibility="hidden";
    document.getElementById('test').style.visibility="hidden";
    document.getElementById('close').style.visibility="hidden";
    
    document.getElementById('convC').style.visibility="hidden";
    document.getElementById('catC').style.visibility="hidden";
    document.getElementById('testC').style.visibility="hidden";
    document.getElementById('closeC').style.visibility="hidden";

  });

  $('#btnProd').click(function () {
    document.getElementById('Nav').style.zIndex=2000;
    document.getElementById('navDemo').style.zIndex=2000;
    document.getElementById('inspP').style.zIndex=1000;

    document.getElementById('textBot').innerHTML="Puedes hacerlo dando click en el boton de inspeccionar producto<br>O con la opción en el menú";
    document.getElementById('hist').style.visibility="hidden";
    document.getElementById('conv').style.visibility="hidden";
    document.getElementById('cat').style.visibility="hidden";
    document.getElementById('close').style.visibility="hidden";
    
    document.getElementById('histC').style.visibility="hidden";
    document.getElementById('convC').style.visibility="hidden";
    document.getElementById('catC').style.visibility="hidden";
    document.getElementById('closeC').style.visibility="hidden";

  });
</script>
</body>
</html>
